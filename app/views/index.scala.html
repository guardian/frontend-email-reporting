@(message: String)

@main("The Guardian Daily Email") {

    <h1>@message</h1>
    <div id="chart1"></div>
    <script type="text/javascript">
    getData();
    function getData(){
        $.get("/stats", null, function(data){makeChart(data)});
    }
    function makeChart(data){
        $(function () {
            $('#chart1').highcharts({
                chart: {
                    type: 'area'
                },
                title: {
                    text: 'Daily email basic stats'
                },
                xAxis: {
                    allowDecimals: false,
                    labels: {
                        formatter: function () {
                            return this.value; // clean, unformatted number for year
                        }
                    }
                },
                yAxis: {
                    title: {
                        text: 'Number of Subscribers'
                    }
                },
                tooltip: {
                    pointFormat: '{series.name} people <b>{point.y:,.0f}</b> in {point.x}'
                },
                plotOptions: {
                    area: {
                        pointStart: 1940,
                        marker: {
                            enabled: false,
                            symbol: 'circle',
                            radius: 2,
                            states: {
                                hover: {
                                    enabled: true
                                }
                            }
                        }
                    }
                },
                series: data
            });
        });
    }
	</script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <script src="http://code.highcharts.com/highcharts.js"></script>

}
